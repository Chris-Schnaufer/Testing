# Superuser for docker commands and such
sudo: required

# python environment and python version
language: python
python: 
  - "3.6"

# What sources to auto build
branches:
  only:
  - master
  - develop
  - "/^v\\d+\\.\\d+(\\.\\d+)?(-\\S*)?$/"

matrix:
  include:
    - name: "Test 1"
      python: 3.6
      env: EXTRACTOR_BRANCH=opendronemap
    - name: "Test 2"
      python: 3.6
      env: EXTRACTOR_BRANCH=clipbyshape
    - name: "Test 3"
      python: 3.6
      env: EXTRACTOR_BRANCH=canopycover

env:
  global:
    - FOO=bar

before_install:
  - echo "Before install"

install:
  - echo "Install step"

script:
  - echo "${EXTRACTOR_BRANCH}"
  - echo "${FOO}"
  - ./app.py "${EXTRACTOR_BRANCH}" "${FOO}"
  - ./other.py "${EXTRACTOR_BRANCH}"